<html>
	<head>
		<script type="text/javascript" src="./js/jquery-3.2.1.min.js">
		</script>

		<script type="text/javascript" src="./js/markdown.min.js">
		</script>

		<script type="text/javascript">
			var AJAXFILEDIR = "data/";
	
			function getAnchor(){
				return window.location.hash.substr(1);
			}

			function getAjaxUri(x){
				if (x == '')
					return '';
				return AJAXFILEDIR + x;
			}

			function refreshUsing(x, f){
				if ( x === '' ){
					return;
				}
				var ajaxuri   = getAjaxUri(x);
				var ajaxdata  = $.ajax({url:ajaxuri, async:false});
				var htmlcontent = f(ajaxdata.responseText);
				$("#box").html(htmlcontent);
			}

			function refresh(x){
				refreshUsing(x, function (x){return markdown.toHTML(x);});
			}

			function anchorRefresh(){
				var anchor = getAnchor();
				refresh(anchor);
			}

			function afterReady(){
				anchorRefresh();
			}

			$(document).ready(afterReady);
			window.addEventListener("popstate", function(){
				anchorRefresh();
			});

		</script>
	</head>
	<body>
		<a href='#data1'>data 1</a>
		<a href='#data2'>data 2</a>
		<a href='#data3'>data 3</a>

		<div id='box'> </div>
	</body>
</html>
